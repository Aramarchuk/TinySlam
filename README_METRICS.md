# SLAM Metrics Evaluation

## Quick Start

### Запуск симуляций с вычислением метрик:

```bash
# TinySLAM
python main.py --slam ts

# EKF SLAM
python main.py --slam ek

# Сравнение результатов
python compare_simple_metrics.py
```

## Метрики

Система вычисляет три основные метрики:

### 1. ATE (Absolute Trajectory Error)
- **Что измеряет**: Среднее отклонение оцененной траектории от реальной
- **Формула**: Среднее евклидово расстояние между позициями
- **Интерпретация**: Меньше = лучше. Показывает общую точность локализации.

### 2. RPE (Relative Pose Error)
- **Что измеряет**: Относительную ошибку между последовательными позами
- **Формула**: Ошибка в относительном движении между шагами
- **Интерпретация**: Меньше = лучше. Показывает локальную консистентность.

### 3. Mean Accuracy
- **Что измеряет**: Точность построения карты
- **Формула**: Доля правильно классифицированных клеток
- **Интерпретация**: Больше = лучше. Показывает качество карты.

## Результаты

### Пример вывода в консоли:

```
============================================================
METRICS FOR TINYSLAM
============================================================

==================================================
SLAM METRICS
==================================================
ATE (Absolute Trajectory Error): 3.7379
RPE (Relative Pose Error):       0.2344
Mean Accuracy:                    0.8196
==================================================
```

### Пример сравнения:

```
============================================================
SLAM ALGORITHMS COMPARISON
============================================================
Metric               TinySLAM     EKF SLAM     Winner
------------------------------------------------------------
ATE                  3.7379       1.3733       EKF SLAM
RPE                  0.2344       0.1370       EKF SLAM
Mean Accuracy        0.8196       0.1280       TinySLAM
============================================================
```

## Файлы

### Основные файлы:
- `simple_metrics.py` - модуль вычисления метрик
- `main.py` - симуляция с интегрированными метриками
- `compare_simple_metrics.py` - сравнение алгоритмов

### Результаты сохраняются в:
- `sim_steps/run_XXXXXX/metrics.txt` - файл с метриками

## Анализ результатов

### TinySLAM:
- ✅ **Отличное качество карты** (Mean Accuracy: ~82%)
- ❌ **Плохая точность траектории** (ATE: ~3.7)
- ❌ **Низкая локальная консистентность** (RPE: ~0.23)

### EKF SLAM:
- ✅ **Отличная точность локализации** (ATE: ~1.4)
- ✅ **Хорошая локальная консистентность** (RPE: ~0.14)
- ❌ **Не строит карту** (Mean Accuracy: ~13%)

## Рекомендации

- **Для локализации**: Используйте EKF SLAM
- **Для картографии**: Используйте TinySLAM
- **Для комбинированных задач**: Рассмотрите гибридные подходы

## Troubleshooting

### Если метрики не показываются:
1. Проверьте, что симуляция завершилась без ошибок
2. Убедитесь, что файл `metrics.txt` создан в `sim_steps/run_XXXXXX/`
3. Запустите `python compare_simple_metrics.py` для поиска результатов

### Если значения нулевые:
- Проверьте, что алгоритм действительно работает (не Ground Truth)
- Убедитесь, что есть различия между реальной и оцененной позами

### Если mean_accuracy низкий:
- Для EKF SLAM это нормально (алгоритм не строит grid-карты)
- Для TinySLAM проверьте правильность интерпретации значений карты